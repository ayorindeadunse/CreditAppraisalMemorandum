@model IEnumerable<Wema_CAM.Models.CAM>
@*@using PagedList.Mvc; *@

@{
    ViewBag.Title = "Index";
}
<script src="@Url.Content("~/Scripts/jquery-1.9.0.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.9.2.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jtable/jquery.jtable.js")" type="text/javascript"></script>

<style>
   
    .tblboda1 {
         border-width: 3px;
    border-style: solid;
    border-color: #CCCCCC;
    padding: 5px;  
    max-width:100%;
      /*padding-right: 0px;  
      padding-bottom: 0.25in;  
      padding-left: 5em;*/  
    }
    
   
</style>
    
<h2></h2>


<div id="tabs">
  <ul>
@*    <li><a href="#tabs-1">Existing CAMs</a></li>*@
    <li><a href="#tabs-2">Create Applicants Brief</a></li>
     @* <li><a href="#tabs-3">Use Existing CAM Template</a></li>*@
  </ul>
  <div id="tabs-2">
        <div id="FormTemplate"></div>
      <input type="button" id="createcam" value="Create CAM" />

  </div>
 
    <br />
    <br />
    <br />
   @* <h3>List of Approved CAMs</h3>*@
   
</div>


<script type="text/javascript">

    $(document).ready(function () {
        $("#tabs").tabs();
        $('#FormTemplate').jtable({
            title: 'List of Applicants Brief',
            paging: true, //Enable paging
            pageSize: 10, //Set page size (default: 10)
            sorting: true, //Enable sorting
            defaultSorting: 'Name ASC', //Set default sorting
            selecting:true,
            multiselect: false,//Disable multiple selection of records
            selectingCheckboxes: true,
            actions: {
                listAction: 'ApplicantTemplate/GetApplicantsList',
                //deleteAction: 'ApplicantTemplate/DeleteApplicant',
                updateAction: 'ApplicantTemplate/EditApplicant',
                createAction: 'ApplicantTemplate/AddApplicant'
            },
            //toolbar: {
            //    items: [{
            //       // icon: '/Images/excelicon.jpg',
            //        text: 'Export to Excel',
            //        click: function () {
            //            //perform your custom job...
            //        }
            //    }, {
            //      //  icon: '/Images/pdficon.jpg',
            //        text: 'Export to Pdf',
            //        click: function () {
            //            //perform your custom job...
            //        }
            //    }]
            //},
                
            fields: {
                ApplicantID: {
                    key: true,
                    create: false,
                    edit: false,
                    list: false
                },
                ApplicantType: {
                   title: 'Applicant Type',
                   width: '23%',
                   options:'ApplicantTemplate/GetApplicantType'
                },
                CustomerID: {
                    title: 'Customer ID',
                    width: '23%',
                    create: true,
                    edit: true,
                    list: true
                },
                AccountNumber: {
                    title: 'Account Number',
                    width: '23%',
                    create: true,
                    edit: true,
                    list: true
                },
                LegalIdentityName: {
                    title: 'Legal Identity Name',
                    width: '23%',
                    create: true,
                    edit: true,
                    list: true
                }
                ,
                YearOfIncorporation: {
                    title: 'Year Of Incorporation',
                    width: '23%',
                    create: true,
                    edit: true,
                    list: true
                }
                ,

                RCNumber: {
                    title: 'RC Number',
                    width: '23%',
                    create: true,
                    edit: true,
                    list: true
                },
               
                BusinessAddress: {
                    title: 'Business Address',
                    width: '23%',
                    create: true,
                    edit: true,
                    list: true
                }
                ,
                NameOfAuditors: {
                    title: 'Name Of Auditors',
                    width: '23%',
                    create: true,
                    edit: true,
                    list: true
                }
                ,
                NatureOfBusiness: {
                    title: 'Nature Of Business',
                    width: '23%',
                    create: true,
                    edit: true,
                    list: true
                }
                ,
                Industry: {
                    title: 'Sector',
                    width: '23%',
                    options: 'ApplicantTemplate/GetIndustry'
                }
                ,

                ProductRange: {
                    title: 'Product Range',
                    width: '23%',
                    create: true,
                    edit: true,
                    list: true
                }
                ,
                MajorClients: {
                    title: 'Major Clients',
                    width: '23%',
                    create: true,
                    edit: true,
                    list: true
                }
                ,                         
                CreationDate: {
                    title: 'Date Created',
                    width: '23%',
                    create: false,
                    edit: false,
                    list:false
                }
                ,
                DateLastUpdated: {
                    title: 'Date Updated',
                    width: '23%',
                    create: false,
                    edit: false,
                    list:false
                }
                ,              
                UpdateUserId: {
                    title: 'Updated by',
                    width: '23%',
                    create: false,
                    edit: false,
                    list:false
                }

                
            }

        });

        //Load student list from server
        $('#FormTemplate').jtable('load');
    });
 
</script>

@*<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table>
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.ApplicantID)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ApplicantType)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.LegalIdentityName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.YearOfIncorporation)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.RCNumber)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.BusinessAddress)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.NameOfAuditors)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.NatureOfBusiness)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Industry)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ProductRange)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.MajorClients)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.CreationDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.DateLastUpdated)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.UpdateUserId)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.ApplicantID)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ApplicantType)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.LegalIdentityName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.YearOfIncorporation)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.RCNumber)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.BusinessAddress)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.NameOfAuditors)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.NatureOfBusiness)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Industry)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ProductRange)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.MajorClients)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CreationDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DateLastUpdated)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.UpdateUserId)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { /* id=item.PrimaryKey */ }) |
            @Html.ActionLink("Details", "Details", new { /* id=item.PrimaryKey */ }) |
            @Html.ActionLink("Delete", "Delete", new { /* id=item.PrimaryKey */ })
        </td>
    </tr>
}

</table>*@

<script type="text/javascript">
  
    $(document).ready(function () {
        $("#createcam").click(function (e) {
            e.preventDefault();
            var $selectedRows = $('#FormTemplate').jtable('selectedRows');
            $selectedRows.each(function () {
                var record = $(this).data('record');
                var applicantid = record.ApplicantID;
                
                // window.location.href = '/CreditRequest/Index/' + applicantid;
               // var notSeen = localStorage['seen'];
               // if (!notSeen) {
                    // open popup
              //  Session['appid'] = applicantid;
           
               window.location.href = '/CreditRequestTemplate/Create/'+applicantid;
              //  window.location.href = '/WemaCAM/CreditRequestTemplate/Create/' + applicantid;
               // }
            });
           
        });
    });

</script>

